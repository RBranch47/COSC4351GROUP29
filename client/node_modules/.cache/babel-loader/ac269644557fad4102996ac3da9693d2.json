{"ast":null,"code":"var _jsxFileName = \"D:\\\\Courses\\\\UH COURSES\\\\Fall 2021\\\\COSC 4351\\\\Booking-Reservation-App\\\\client\\\\src\\\\components\\\\pay\\\\Pay.jsx\",\n    _s = $RefreshSig$();\n\nimport StripeCheckout from \"react-stripe-checkout\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport axios from \"axios\";\nimport { Context } from \"../../context/Context\";\nimport \"./pay.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Pay({\n  name,\n  date\n}) {\n  _s();\n\n  const {\n    user\n  } = useContext(Context);\n  const KEY = process.env.REACT_APP_STRIPE;\n  const [stripeToken, setStripeToken] = useState(null); // Stripe method\n\n  const onToken = token => {\n    setStripeToken(token);\n  }; // API *** Send and Store Payment to database\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  //   const createPayment = async (stripeId) => {\n  //     try {\n  //       const res = await axios.post(\"/payment\", {\n  //         userId: user ? user._id : null,\n  //         stripeId: stripeId,\n  //         date: props.dateTime.toUTCString(),\n  //         table: props.tableName,\n  //       });\n  //       console.log(res.data);\n  //     } catch (error) {\n  //       console.log(error);\n  //     }\n  //   };\n  // API *** Stripe Payment Checkout\n\n\n  useEffect(() => {\n    const makeRequest = async () => {\n      try {\n        const res = await axios.post(\"/checkout/payment\", {\n          tokenId: stripeToken.id,\n          amount: 1000\n        });\n        console.log(res.data); // createPayment(res.data.id);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    stripeToken && makeRequest();\n  }, [stripeToken]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"payment\",\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"paymentNotice\",\n      children: [\"*** Due to Weekend Reservation, We need to hold $10 fee. Sorry for this Inconvenience \", name, \" \", date, \"***\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(StripeCheckout, {\n      name: \"Restaurant 4351\",\n      image: \"https://avatars.githubusercontent.com/u/78432157?s=400&u=a3542854353b321e90e5f526d6ac7d5b30a702bf&v=4\",\n      billingAddress: true,\n      shippingAddress: true,\n      description: `Your Holding Charge is $10`,\n      amount: 1000,\n      token: onToken,\n      stripeKey: KEY,\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"paymentButton\",\n        children: \"PAY NOW\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Pay, \"gK0pZlAKfb4yLOC1dI2vkksi7ac=\");\n\n_c = Pay;\n\nvar _c;\n\n$RefreshReg$(_c, \"Pay\");","map":{"version":3,"sources":["D:/Courses/UH COURSES/Fall 2021/COSC 4351/Booking-Reservation-App/client/src/components/pay/Pay.jsx"],"names":["StripeCheckout","React","useState","useEffect","useContext","axios","Context","Pay","name","date","user","KEY","process","env","REACT_APP_STRIPE","stripeToken","setStripeToken","onToken","token","makeRequest","res","post","tokenId","id","amount","console","log","data","error"],"mappings":";;;AAAA,OAAOA,cAAP,MAA2B,uBAA3B;AACA,OAAOC,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,UAArC,QAAuD,OAAvD;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,uBAAxB;AACA,OAAO,WAAP;;AAEA,eAAe,SAASC,GAAT,CAAa;AAAEC,EAAAA,IAAF;AAAQC,EAAAA;AAAR,CAAb,EAA6B;AAAA;;AAC1C,QAAM;AAAEC,IAAAA;AAAF,MAAWN,UAAU,CAACE,OAAD,CAA3B;AACA,QAAMK,GAAG,GAAGC,OAAO,CAACC,GAAR,CAAYC,gBAAxB;AACA,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCd,QAAQ,CAAC,IAAD,CAA9C,CAH0C,CAK1C;;AACA,QAAMe,OAAO,GAAIC,KAAD,IAAW;AACzBF,IAAAA,cAAc,CAACE,KAAD,CAAd;AACD,GAFD,CAN0C,CAU1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;AACAf,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMgB,WAAW,GAAG,YAAY;AAC9B,UAAI;AACF,cAAMC,GAAG,GAAG,MAAMf,KAAK,CAACgB,IAAN,CAAW,mBAAX,EAAgC;AAChDC,UAAAA,OAAO,EAAEP,WAAW,CAACQ,EAD2B;AAEhDC,UAAAA,MAAM,EAAE;AAFwC,SAAhC,CAAlB;AAIAC,QAAAA,OAAO,CAACC,GAAR,CAAYN,GAAG,CAACO,IAAhB,EALE,CAMF;AACD,OAPD,CAOE,OAAOC,KAAP,EAAc;AACdH,QAAAA,OAAO,CAACC,GAAR,CAAYE,KAAZ;AACD;AACF,KAXD;;AAYAb,IAAAA,WAAW,IAAII,WAAW,EAA1B;AACD,GAdQ,EAcN,CAACJ,WAAD,CAdM,CAAT;AAgBA,sBACE;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA,4BACE;AAAM,MAAA,SAAS,EAAC,eAAhB;AAAA,2GAEiBP,IAFjB,OAEwBC,IAFxB;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAKE,QAAC,cAAD;AACE,MAAA,IAAI,EAAC,iBADP;AAEE,MAAA,KAAK,EAAC,uGAFR;AAGE,MAAA,cAAc,MAHhB;AAIE,MAAA,eAAe,MAJjB;AAKE,MAAA,WAAW,EAAG,4BALhB;AAME,MAAA,MAAM,EAAE,IANV;AAOE,MAAA,KAAK,EAAEQ,OAPT;AAQE,MAAA,SAAS,EAAEN,GARb;AAAA,6BAUE;AAAQ,QAAA,SAAS,EAAC,eAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAVF;AAAA;AAAA;AAAA;AAAA,YALF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAoBD;;GA/DuBJ,G;;KAAAA,G","sourcesContent":["import StripeCheckout from \"react-stripe-checkout\";\r\nimport React, { useState, useEffect, useContext } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Context } from \"../../context/Context\";\r\nimport \"./pay.css\";\r\n\r\nexport default function Pay({ name, date }) {\r\n  const { user } = useContext(Context);\r\n  const KEY = process.env.REACT_APP_STRIPE;\r\n  const [stripeToken, setStripeToken] = useState(null);\r\n\r\n  // Stripe method\r\n  const onToken = (token) => {\r\n    setStripeToken(token);\r\n  };\r\n\r\n  // API *** Send and Store Payment to database\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  //   const createPayment = async (stripeId) => {\r\n  //     try {\r\n  //       const res = await axios.post(\"/payment\", {\r\n  //         userId: user ? user._id : null,\r\n  //         stripeId: stripeId,\r\n  //         date: props.dateTime.toUTCString(),\r\n  //         table: props.tableName,\r\n  //       });\r\n  //       console.log(res.data);\r\n  //     } catch (error) {\r\n  //       console.log(error);\r\n  //     }\r\n  //   };\r\n\r\n  // API *** Stripe Payment Checkout\r\n  useEffect(() => {\r\n    const makeRequest = async () => {\r\n      try {\r\n        const res = await axios.post(\"/checkout/payment\", {\r\n          tokenId: stripeToken.id,\r\n          amount: 1000,\r\n        });\r\n        console.log(res.data);\r\n        // createPayment(res.data.id);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    };\r\n    stripeToken && makeRequest();\r\n  }, [stripeToken]);\r\n\r\n  return (\r\n    <div className=\"payment\">\r\n      <span className=\"paymentNotice\">\r\n        *** Due to Weekend Reservation, We need to hold $10 fee. Sorry for this\r\n        Inconvenience {name} {date}***\r\n      </span>\r\n      <StripeCheckout\r\n        name=\"Restaurant 4351\"\r\n        image=\"https://avatars.githubusercontent.com/u/78432157?s=400&u=a3542854353b321e90e5f526d6ac7d5b30a702bf&v=4\"\r\n        billingAddress\r\n        shippingAddress\r\n        description={`Your Holding Charge is $10`}\r\n        amount={1000}\r\n        token={onToken}\r\n        stripeKey={KEY}\r\n      >\r\n        <button className=\"paymentButton\">PAY NOW</button>\r\n      </StripeCheckout>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}