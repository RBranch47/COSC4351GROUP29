{"ast":null,"code":"var _jsxFileName = \"D:\\\\Courses\\\\UH COURSES\\\\Fall 2021\\\\COSC 4351\\\\Booking-Reservation-App\\\\client\\\\src\\\\components\\\\pay\\\\Pay.jsx\",\n    _s = $RefreshSig$();\n\nimport StripeCheckout from \"react-stripe-checkout\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport axios from \"axios\";\nimport { Context } from \"../../context/Context\";\nimport \"./pay.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Pay(props) {\n  _s();\n\n  const {\n    user\n  } = useContext(Context);\n  const KEY = process.env.REACT_APP_STRIPE;\n  const [stripeToken, setStripeToken] = useState(null);\n  let dateTime = new Date(props.dateTime); // Stripe method\n\n  const onToken = token => {\n    setStripeToken(token);\n  }; // API *** Send and Store Payment to database\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n\n\n  const createPayment = async stripeId => {\n    try {\n      await axios.post(\"/payment\", {\n        userId: user ? user._id : null,\n        stripeId: stripeId,\n        date: dateTime.toUTCString(),\n        table: props.tableName\n      }); //   console.log(res.data);\n\n      props.payment(true);\n    } catch (error) {\n      console.log(error);\n    }\n  }; // API *** Stripe Payment Checkout\n\n\n  useEffect(() => {\n    const makeRequest = async () => {\n      try {\n        const res = await axios.post(\"/checkout/payment\", {\n          tokenId: stripeToken.id,\n          amount: 1000\n        }); // console.log(res.data);\n\n        createPayment(res.data.id);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    stripeToken && makeRequest();\n  }, [createPayment, stripeToken]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"payment\",\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"paymentNotice\",\n      children: \"*** Due to Weekend Reservation, We need to hold $10 fee. Sorry for this Inconvenience ***\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(StripeCheckout, {\n      name: \"Restaurant 4351\",\n      image: \"https://avatars.githubusercontent.com/u/78432157?s=400&u=a3542854353b321e90e5f526d6ac7d5b30a702bf&v=4\",\n      billingAddress: true,\n      shippingAddress: true,\n      description: `Your Holding Charge is $10`,\n      amount: 1000,\n      token: onToken,\n      stripeKey: KEY,\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"paymentButton\",\n        children: \"PAY NOW\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"paymentNotice\",\n      children: \"*** Using This Test Stripe Payment Card ***\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"paymentNotice\",\n      children: \"*** 4242 4242 4242 4242 ***\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Pay, \"gK0pZlAKfb4yLOC1dI2vkksi7ac=\");\n\n_c = Pay;\n\nvar _c;\n\n$RefreshReg$(_c, \"Pay\");","map":{"version":3,"sources":["D:/Courses/UH COURSES/Fall 2021/COSC 4351/Booking-Reservation-App/client/src/components/pay/Pay.jsx"],"names":["StripeCheckout","React","useState","useEffect","useContext","axios","Context","Pay","props","user","KEY","process","env","REACT_APP_STRIPE","stripeToken","setStripeToken","dateTime","Date","onToken","token","createPayment","stripeId","post","userId","_id","date","toUTCString","table","tableName","payment","error","console","log","makeRequest","res","tokenId","id","amount","data"],"mappings":"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","sourcesContent":["import StripeCheckout from \"react-stripe-checkout\";\r\nimport React, { useState, useEffect, useContext } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Context } from \"../../context/Context\";\r\nimport \"./pay.css\";\r\n\r\nexport default function Pay(props) {\r\n  const { user } = useContext(Context);\r\n  const KEY = process.env.REACT_APP_STRIPE;\r\n  const [stripeToken, setStripeToken] = useState(null);\r\n\r\n  let dateTime = new Date(props.dateTime);\r\n  // Stripe method\r\n  const onToken = (token) => {\r\n    setStripeToken(token);\r\n  };\r\n\r\n  // API *** Send and Store Payment to database\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  const createPayment = async (stripeId) => {\r\n    try {\r\n      await axios.post(\"/payment\", {\r\n        userId: user ? user._id : null,\r\n        stripeId: stripeId,\r\n        date: dateTime.toUTCString(),\r\n        table: props.tableName,\r\n      });\r\n      //   console.log(res.data);\r\n      props.payment(true);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  // API *** Stripe Payment Checkout\r\n  useEffect(() => {\r\n    const makeRequest = async () => {\r\n      try {\r\n        const res = await axios.post(\"/checkout/payment\", {\r\n          tokenId: stripeToken.id,\r\n          amount: 1000,\r\n        });\r\n        // console.log(res.data);\r\n        createPayment(res.data.id);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    };\r\n    stripeToken && makeRequest();\r\n  }, [createPayment, stripeToken]);\r\n\r\n  return (\r\n    <div className=\"payment\">\r\n      <span className=\"paymentNotice\">\r\n        *** Due to Weekend Reservation, We need to hold $10 fee. Sorry for this\r\n        Inconvenience ***\r\n      </span>\r\n      <StripeCheckout\r\n        name=\"Restaurant 4351\"\r\n        image=\"https://avatars.githubusercontent.com/u/78432157?s=400&u=a3542854353b321e90e5f526d6ac7d5b30a702bf&v=4\"\r\n        billingAddress\r\n        shippingAddress\r\n        description={`Your Holding Charge is $10`}\r\n        amount={1000}\r\n        token={onToken}\r\n        stripeKey={KEY}\r\n      >\r\n        <button className=\"paymentButton\">PAY NOW</button>\r\n      </StripeCheckout>\r\n      <span className=\"paymentNotice\">\r\n        *** Using This Test Stripe Payment Card ***\r\n      </span>\r\n      <span className=\"paymentNotice\">*** 4242 4242 4242 4242 ***</span>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}